"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__decorate=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},__metadata=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),list_service_1=require("../../services/list.service"),pagination_service_1=require("../../services/pagination.service"),filter_service_1=require("../../services/filter.service"),ListComponent=function(){function e(t,i,n){_classCallCheck(this,e),this.listService=t,this.filterService=i,this.paginationService=n,this.pagination={}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getPersonsData()}},{key:"getPersonsData",value:function(){var e=this;this.listService.getPromiseData().then(function(t){return e.initList(t)})}},{key:"initList",value:function(e){this.filteredPersons=this.personsData=e,this.setPage(1)}},{key:"setPage",value:function(e){if(!this.pagination.totalPages||!(e<1||e>this.pagination.totalPages))return this.pagination=this.paginationService.getPagination(this.filteredPersons.length,e,5),this.pagination==={}?void(this.displayingPersons=[]):void(this.displayingPersons=this.filteredPersons.slice(this.pagination.startIndex,this.pagination.endIndex+1))}},{key:"onFilterChange",value:function(e){this.filteredPersons=this.filterService.getFilteredPersons(e,this.personsData),this.setPage(1)}},{key:"onPaginationClick",value:function(e){this.setPage(e)}}]),e}();ListComponent=__decorate([core_1.Component({selector:"list",templateUrl:"app/components/list.component/list.component.html",styleUrls:["app/components/list.component/list.component.css"],providers:[list_service_1.ListService,filter_service_1.FilterService,pagination_service_1.PaginationService]}),__metadata("design:paramtypes",[list_service_1.ListService,filter_service_1.FilterService,pagination_service_1.PaginationService])],ListComponent),exports.ListComponent=ListComponent;